
論文情報・リンク
論文リンク：[ https://ai.stanford.edu/~ronnyk/2009controlledExperimentsOnTheWebSurvey.pdf ](https://arxiv.org/pdf/2012.08724)



# Abstract

オンライン実験（A/Bテストとも呼ばれる）は、テック業界において製品の影響を測定し、ビジネス上の意思決定を行うためのゴールドスタンダードである。
しかし、実験の妥当性と有用性は、不偏性と十分な検出力にかかっている。
二面型のオンライン・マーケットプレイスでは、これら双方の要件が疑問視される。
ベルヌーイ無作為化実験では、市場競争を通じて処置群のユニットが対照群のユニットに干渉するためバイアスが生じ、「安定単位処置値仮定（SUTVA）」に違反する。
さらに市場の少なくとも一方では、両サイドのサンプルサイズの不均衡により、しばしば検出力が不足する。オンライン経済におけるマーケットプレイスの重要性と、製品改善における実験の決定的な役割にもかかわらず、
マーケットプレイス実験におけるこのバイアスと低検出力の問題に対する有効かつ実用的な解決策は欠けていた。
本論文は、買い手が有限でも無限でもよい「定義された予算」を持つあらゆるマーケットプレイスにおいて不偏となる実験デザインを提案することで、このギャップを埋める。
次に、このデザインをオンライン・マーケットプレイスにデプロイするための一般化可能なシステム・アーキテクチャを提示する。
最後に、実世界の二つのオンライン・マーケットプレイスで実施した実験から得られた実証的なパフォーマンスにより、我々の所見を確認する。

# 1 Introduction

オンライン実験（A/Bテストとも呼ばれる）は、テック業界において製品インパクトを測定し、ビジネス上の意思決定を行うためのゴールドスタンダードとなっている。Google、Facebook、Amazon、Microsoft、LinkedIn といった企業はこのパラダイムを受け入れ、大規模なオンライン実験を可能にする社内プラットフォームを構築してきた（Tang et al., 2010; Letham et al., 2019; Deng and Shi, 2016; Kohavi et al., 2012; Xu et al., 2015）。さらに、より広いユーザーに「実験 as a service」を提供する商用プラットフォームも登場している（Johari et al., 2017）。オンライン実験が意思決定に果たす重要な役割と、それがビジネスに与える大規模な影響を踏まえると、実験の**不偏性（bias の無さ）と検出力（power）**を確保することは極めて重要である。

実験にバイアスがあると、効果推定値は体系的に誤り、ビジネス意思決定の質が損なわれる。これは、バイアスが体系的である場合には特に有害である。実験に十分な検出力がないと、大きな影響であっても統計的に有意とならず「中立」と誤って見なされてしまう。また、影響が検出できたとしても、実験のスループット、ひいてはイノベーションの速度が制限される。こうした理由から、オンライン実験に関する文献の大半は、干渉構造の下で不偏な実験を設計すること（Saveski et al., 2017; Eckles et al., 2017）、もしくは不偏な実験の検出力を高めること（Deng et al., 2013）のいずれかに費やされてきた。

不偏でかつ高い検出力を持つ実験を設計する最適戦略は、基礎となる干渉（interference）の構造に強く依存する。テック業界で最も研究されてきた干渉の例はオンライン・ソーシャルネットワークである（Saveski et al., 2017; Eckles et al., 2017）。そこでは、各ユニットは同一タイプのエンティティ（例：SNSのメンバー）であり、互いに接続し、その接続を通じて相互作用する。

一方、オンライン・プラットフォームでもう一つ重要でありながら十分に扱われてこなかった干渉構造がオンライン・マーケットプレイスである。ソーシャルネットワークと異なり、マーケットプレイスの母集団は少なくとも2種類のユニット――商品・サービス・注目（attention）を提供する売り手と、ある通貨でそれらを購入する買い手――からなる。マーケットプレイスはオンライン経済の重要な一部であり、しばしばテック企業における収益の源泉である。そのため、テック企業とオンライン経済の健全性の双方にとって、オンライン・マーケットプレイスで不偏かつ高い検出力をもって実験できることが重要である。オンライン・マーケットプレイスの例としては、広告主がプラットフォーム会員の注意を広告インプレッションとして購入する広告マーケットプレイス（McMahan et al., 2013; He et al., 2014）、雇用者が求職者の注意を求人掲載として購入する採用マーケットプレイス、教育プラットフォームで買い手が教育者からコースを購入するケースなどがある。

オンライン・マーケットプレイスにおける干渉やネットワーク構造は、不偏性と検出力の双方に対して実験上の課題をもたらす。売り手側または買い手側でのベルヌーイ無作為化実験は「安定単位処置値仮定（SUTVA）」（Rubin, 2005; Johari et al., 2020）に違反し、バイアスを生む。SUTVA がなぜ破られるのかを示すために、売り手側のベルヌーイ無作為化実験を例にとる。もし処置が売り手の競争力を高めるなら、すべての買い手が依然として十分な予算の余力を持ってより多く購入できるのでない限り、処置群の売り手の魅力度の上昇は、相対的に対照群の売り手の魅力度の低下に結びつき、処置側の売上が増えるほど対照側の売上が減少する。マーケットプレイスにおけるこの種の干渉は、各ユニットの潜在アウトカムは自分が受けた処置のみに依存し、他ユニットが受けた処置には依存しないとする SUTVA に反する。同様の議論は、買い手側のベルヌーイ無作為化実験も SUTVA に違反し、バイアスを生むことを説明する。マーケティング領域では、このバイアスは**「カニバリゼーション・バイアス」と呼ばれる。これは、総売上が成長したからではなく、処置側の売上が対照側の売上を食って増えていることを強調する呼び名である。カニバリゼーションが存在する状況でベルヌーイ無作為化実験に基づいて意思決定を行うと、処置効果が体系的に過大評価**される。現実のあらゆるマーケットプレイスでは、買い手の予算や売り手の在庫には常に制約があるため、売り手側・買い手側いずれのベルヌーイ無作為化実験もこのカニバリゼーション・バイアスの影響を受ける。

カニバリゼーション・バイアスに加えて、マーケットプレイス実験は検出力不足にも悩まされる。これは、市場の二つの側面が通常異なるタイプのエンティティから成り、数の規模が大きく異なるために生じる。たとえば広告マーケットプレイスでは、買い手が企業広告主や代理店、売り手が一般ユーザーであるため、買い手の数は売り手の数より3桁小さいことがある（Lara O’Reilly, 2015; WebsiteBuilder, 2020）。同様に、物理商品のマーケットプレイスでは、買い手は消費者、売り手は中小事業者であることが多く、買い手の数は売り手の数より60倍多い（Emily Dayton, 2019）。このサンプルサイズの非対称は、そのまま実験の検出力の非対称に結びつく。さらに、サンプルが小さい側の指標分布に厚い裾（ロングテール）があると、この検出力不足は一層深刻化する。市場の一方で相対的に検出力が不足する、すなわちパワーの非対称が生じることは望ましくない。マーケットプレイス・ビジネスは両側を継続的に最適化してはじめて持続可能であり、一方の側の実験検出力が著しく低いということは、その側のイノベーションや最適化の速度が絞られてしまうからである。

既存文献のマーケットプレイス実験に対する解決策は、おおまかに二つのアプローチに分類できる。第一は分析アプローチで、干渉構造とカニバリゼーション・バイアスをまずモデル化し、バイアスのあるベルヌーイ無作為化実験にモデルベースの補正を施す（Johari et al., 2020; Blake and Coey, 2014）。第二は設計アプローチで、マーケットプレイスに関する弱く検証可能な仮定の下で不偏となる代替デザインを探る（Bojinov and Shephard, 2019; Jason (Xiao) Wang, 2018; Basse et al., 2016a）。分析アプローチでは、通常まずマーケットプレイスをパラメトリックなモデルに単純化する必要があり、そのモデリング仮定自体はしばしば検証不能である。実際、もしモデルがマーケットプレイスを正確に捉えられるなら、実験は不要で、処置効果はシミュレーションで測定できるはずである。いくつかの設計アプローチ（Bojinov and Shephard, 2019; Jason (Xiao) Wang, 2018）は、妥当な仮定の下で低バイアスを達成しているが、その低バイアスはしばしばより低い検出力という代償を伴う。

本論文は、budget-split（予算分割）デザインを提案することで、こうしたバイアスと検出力の両課題を克服し、マーケットプレイス実験の文献に貢献する。budget-split デザインが不偏であるために必要なのは、買い手が連続的な予算（有限でも無限でもよい）を持つという、検証が容易な仮定が一つだけである。現実世界のマーケットプレイスに展開した場合、代替デザインと比べて最大30倍の検出力を示す。さらに、このデザインの実装とデプロイには、既存のオンライン・マーケットプレイス基盤や実験プラットフォームの全面刷新は不要であり、各モジュールへの増分的な変更だけで済む。

我々のデザインは、Basse et al. (2016a) の budget allocation デザインといくつかの類似点を共有するが、両者は本質的に異なる。Basse et al. (2016a) では、各買い手に間接的で人工的な「予算」（クォータ）を付与するのに対し、budget-split デザインは買い手が定義する直接的かつ自然な予算を扱う。また、Greg Novak and Spiegel (2020) のブログ投稿には、budget-split の在庫分割（inventory-split）版に相当する設計が概説されていることも付記しておく。我々が提示する budget-split デザインの形式的解析は、小改変でこの在庫分割設定にも直接適用可能である。

budget-split デザインのインパクトは大きい。これは、カニバリゼーション・バイアスのないマーケットプレイス実験を可能にし、従来ならノイズに埋もれていた処置効果の検出力を押し上げた。その結果、マーケットプレイスにおけるイノベーションと最適化は、はるかに高い確信度と速度で実施できるようになった。本稿では、広告マーケットプレイスを通例の例として、budget-split デザインを提示する。方法論、システム・アーキテクチャ、そして実証結果は、買い手が明確な予算を持つ任意のマーケットプレイス（たとえば採用マーケットプレイス）に容易に拡張できる。

本論文の構成は次のとおりである。第2節では、潜在アウトカム枠組みを用いてマーケットプレイスにおける因果推論の問題を形式的に定義する。第3節では、budget-split デザインを導入し、クラスター無作為化や隔日（alternating-day）デザインといった代替デザインとの対比を行う。第4節では、オンライン・マーケットプレイスに budget-split デザインをデプロイする際のシステム・アーキテクチャと実装上の要点を述べる。第5節では、budget-split デザインの不偏性と検出力に関する実証結果を報告する。最後に第6節で、議論と今後の研究課題を述べて結ぶ。

